# 28 | 读写分离有哪些坑
## 处理主备延迟导致的读写分离问题。
- 强制走主库方案；
- sleep方案；
- 判断主备无延迟方案；
- 配合semi-sync方案；
- 等主库位点方案；
- 等GTID方案。

# 29 | 如何判断一个数据库是不是出问题了
## 并发连接和并发查询
你在show processlist的结果里，看到的几千个连接，指的就是并发连接。而“当前正在执行”的语句，才是我们所说的并发查询。

通常情况下，我们建议把innodb_thread_concurrency设置为64~128之间的值。

并发连接数达到几千个影响并不大，就是多占一些内存而已。我们应该关注的是并发查询，因为并发查询太高才是CPU杀手。

==在线程进入锁等待以后，并发线程的计数会减一==

## 判断方法
select 1判断
查表判断
更新判断
内部统计


## 小结
我个人比较倾向的方案，是优先考虑update系统表，然后再配合增加检测performance_schema的信息。

# 30 | 答疑文章（二）：用动态的观点看加锁