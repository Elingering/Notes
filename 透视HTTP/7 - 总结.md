# 39 | HTTP性能优化面面观（上）
## HTTP 服务器
衡量服务器性能的主要指标有三个：==吞吐量==（requests per second 就是我们常说的 RPS，每秒的请求次数，也有叫 TPS、QPS）、==并发数==（concurrency）和==响应时间==（time per request）。

## HTTP 客户端
最基本的性能指标就是“延迟”（latency）。


图里面的这些指标都是什么含义呢？我给你解释一下：
因为有“队头阻塞”，浏览器对每个域名最多开 6 个并发连接（HTTP/1.1），当页面里链接很多的时候就必须排队等待（Queued、Queueing），这里它就等待了 1.62 秒，然后才被浏览器正式处理；
浏览器要预先分配资源，调度连接，花费了 11.56 毫秒（Stalled）;
连接前必须要解析域名，这里因为有本地缓存，所以只消耗了 0.41 毫秒（DNS Lookup）；
与网站服务器建立连接的成本很高，总共花费了 270.87 毫秒，其中有 134.89 毫秒用于 TLS 握手，那么 TCP 握手的时间就是 135.98 毫秒（Initial connection、SSL）；
实际发送数据非常快，只用了 0.11 毫秒（Request sent）；
之后就是等待服务器的响应，专有名词叫 TTFB（Time To First Byte），也就是“首字节响应时间”，里面包括了服务器的处理时间和网络传输时间，花了 124.2 毫秒；
接收数据也是非常快的，用了 3.58 毫秒（Content Dowload）。
从这张图你可以看到，一次 HTTP“请求 - 响应”的过程中延迟的时间是非常惊人的，总时间 415.04 毫秒里占了差不多 99%。

所以，客户端 HTTP 性能优化的关键就是：降低延迟。

# 40 | HTTP性能优化面面观（下）