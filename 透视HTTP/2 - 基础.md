# 08 | 键入网址再按下回车，后面究竟发生了什么？
## 抓包分析
1. 浏览器要用 HTTP 协议收发数据，==首先要做的就是建立 TCP 连接==。就是最开始的三个抓包。
2. 按照 HTTP 协议规定的格式，通过 TCP 发送了一个“GET / HTTP/1.1”请求报文，也就是 Wireshark 里的第四个包。
3. Web 服务器回复了第五个包，在 TCP 协议层面确认：“刚才的报文我已经收到了”
4. 要求获取根目录下的默认文件，那就从磁盘上把那个文件全读出来，再拼成符合 HTTP 格式的报文，发回去。这就是 Wireshark 里的第六个包“HTTP/1.1 200 OK”，底层走的还是 TCP 协议。
5. 浏览器也要给服务器回复一个 TCP 的 ACK 确认，“你的响应报文收到了，多谢。”，即第七个包。

除去握手，一个请求是4个包。 HTTP 协议基本工作流程，也就是“请求 - 应答” “一发一收”的模式。

## 小结
1. HTTP 协议基于底层的 TCP/IP 协议，所以必须要用 IP 地址建立连接；
2. 如果不知道 IP 地址，就要用 DNS 协议去解析得到 IP 地址，否则就会连接失败；
3. 建立 TCP 连接后会顺序收发数据，请求方和应答方都必须依据 HTTP 规范构建和解析报文；
4. 为了减少响应时间，整个过程中的每一个环节都会有缓存，能够实现“短路”操作；
5. 虽然现实中的 HTTP 传输过程非常复杂，但理论上仍然可以简化成实验里的“两点”模型。

# 09 | HTTP报文是什么样子的？
## 报文结构
HTTP 协议的请求报文和响应报文的结构基本相同，由三大部分组成：
1. 起始行（start line）：描述请求或响应的基本信息；
2. 头部字段集合（header）：使用 key-value 形式更详细地说明报文；
3. 消息正文（entity）：实际传输的数据，它不一定是纯文本，可以是图片、视频等二进制数据。
